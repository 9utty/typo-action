{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\n\ninterface TypoActionProps {\n  text: string\n  pointText?: string\n  className?: string\n  pointColor?: string\n  cursorText?: string\n  cursorView?: boolean\n  cursorColor?: string\n  delay?: number\n  speed?: number\n}\n\nconst TypoAction: React.FC<TypoActionProps> = ({\n  text,\n  pointText = '',\n  className,\n  pointColor = 'red',\n  cursorText = '|',\n  cursorView = true,\n  cursorColor = 'white',\n  delay = 0,\n  speed = 100\n}) => {\n  const [displayedText, setDisplayedText] = useState('')\n  const [animationPlayed, setAnimationPlayed] = useState(false)\n  const [cursorOpacity, setCursorOpacity] = useState(1)\n  const textRef = useRef<HTMLSpanElement>(null)\n\n  const applyPointText = (inputText: string) => {\n    if (pointText) {\n      const targetIndex = inputText.indexOf(pointText)\n      if (targetIndex !== -1) {\n        return (\n          <>\n            {inputText.slice(0, targetIndex)}\n            <span style={{ color: pointColor }}>{pointText}</span>\n            {inputText.slice(targetIndex + pointText.length)}\n          </>\n        )\n      }\n    }\n    return inputText\n  }\n\n  const handleScroll = () => {\n    if (textRef.current) {\n      const windowHeight =\n        'innerHeight' in window\n          ? window.innerHeight\n          : document.documentElement.offsetHeight\n      const rect = textRef.current.getBoundingClientRect()\n      const elemTop = rect.top\n      const isVisible = elemTop <= windowHeight\n\n      if (isVisible && !animationPlayed) {\n        if (delay !== 0) {\n          setTimeout(() => {\n            setDisplayedText('')\n            let index = 0\n            const interval = setInterval(() => {\n              if (index < text.length) {\n                setDisplayedText((displayText) => {\n                  if (displayText.length < text.length) {\n                    return text.slice(0, index + 1)\n                  }\n                  return displayText\n                })\n                index++\n              } else {\n                clearInterval(interval)\n              }\n            }, speed)\n          }, delay)\n        } else {\n          setDisplayedText('')\n          let index = 0\n          const interval = setInterval(() => {\n            if (index < text.length) {\n              setDisplayedText((displayText) => {\n                if (displayText.length < text.length) {\n                  return text.slice(0, index + 1)\n                }\n                return displayText\n              })\n              index++\n            } else {\n              clearInterval(interval)\n            }\n          }, speed)\n        }\n        setAnimationPlayed(true)\n      } else if (!isVisible && animationPlayed) {\n        let reversedIndex = text.length\n        const reversedInterval = setInterval(() => {\n          if (reversedIndex > -1) {\n            setDisplayedText((displayText) => {\n              if (displayText.length > 0) {\n                return text.slice(0, reversedIndex)\n              }\n              return displayText\n            })\n            reversedIndex--\n          } else {\n            clearInterval(reversedInterval)\n          }\n        }, speed)\n        setAnimationPlayed(false)\n      }\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll)\n    return () => {\n      window.removeEventListener('scroll', handleScroll)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (cursorView) {\n      const cursorInterval = setInterval(() => {\n        setCursorOpacity((prevCursorOpacity) => 1 - prevCursorOpacity)\n      }, 500)\n      return () => {\n        clearInterval(cursorInterval)\n      }\n    }\n  }, [cursorView])\n\n  return (\n    <span className={className} ref={textRef}>\n      {applyPointText(displayedText)}\n      <span\n        style={{\n          marginLeft: '2px',\n          color: cursorColor,\n          opacity: cursorOpacity\n        }}\n      >\n        {cursorText}\n      </span>\n    </span>\n  )\n}\n\nexport default TypoAction\n"],"names":["TypoAction","_ref","text","_ref$pointText","pointText","className","_ref$pointColor","pointColor","_ref$cursorText","cursorText","_ref$cursorView","cursorView","_ref$cursorColor","cursorColor","_ref$delay","delay","_ref$speed","speed","_useState","useState","displayedText","setDisplayedText","_useState2","animationPlayed","setAnimationPlayed","_useState3","cursorOpacity","setCursorOpacity","textRef","useRef","applyPointText","inputText","targetIndex","indexOf","React","createElement","Fragment","slice","style","color","length","handleScroll","current","windowHeight","window","innerHeight","document","documentElement","offsetHeight","rect","getBoundingClientRect","elemTop","top","isVisible","setTimeout","index","interval","setInterval","displayText","clearInterval","reversedIndex","reversedInterval","useEffect","addEventListener","removeEventListener","cursorInterval","prevCursorOpacity","ref","marginLeft","opacity"],"mappings":"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"}