{"version":3,"file":"index.modern.js","sources":["../src/Cursor.tsx","../src/index.tsx"],"sourcesContent":["/* eslint-disable react/react-in-jsx-scope */\nimport { useEffect, useState } from 'react'\n\ninterface CursorProps {\n  cursorText?: string\n  cursorColor?: string\n}\n\nconst Cursor: React.FC<CursorProps> = ({\n  cursorText = '|',\n  cursorColor = 'white'\n}) => {\n  const [cursorOpacity, setCursorOpacity] = useState<number>(1)\n\n  useEffect(() => {\n    const cursorInterval = setInterval(() => {\n      setCursorOpacity((state) => (state === 0 ? 1 : 0))\n    }, 500)\n\n    return () => {\n      clearInterval(cursorInterval)\n    }\n  }, [])\n\n  return (\n    <span\n      style={{\n        opacity: cursorOpacity,\n        paddingLeft: '3px',\n        color: cursorColor\n      }}\n    >\n      {cursorText}\n    </span>\n  )\n}\n\nexport default Cursor\n","import React, { useEffect, useState, useRef } from 'react'\nimport Cursor from './Cursor'\n\ninterface TypoActionProps {\n  text: string\n  pointText?: string\n  className?: string\n  pointColor?: string\n  cursorText?: string\n  cursorView?: boolean\n  cursorColor?: string\n  delay?: number\n  speed?: number\n}\n\nconst TypoAction: React.FC<TypoActionProps> = ({\n  text,\n  pointText = '',\n  className,\n  pointColor = 'red',\n  cursorText = '|',\n  cursorView = true,\n  cursorColor = 'white',\n  delay = 0,\n  speed = 100\n}) => {\n  const [displayedText, setDisplayedText] = useState<string>('')\n  const [animationPlayed, setAnimationPlayed] = useState<boolean>(false)\n  const [intervalId, setIntervalId] = useState<ReturnType<\n    typeof setInterval\n  > | null>(null)\n  const [playing, setPlaying] = useState<boolean>(false)\n  const [isVisible, setIsVisible] = useState<boolean>(false)\n  const textRef = useRef<HTMLSpanElement>(null)\n\n  const applyPointText = (inputText: string) => {\n    if (pointText) {\n      const targetIndex = inputText.indexOf(pointText)\n      if (targetIndex !== -1) {\n        return (\n          <>\n            {inputText.slice(0, targetIndex)}\n            <span style={{ color: pointColor }}>{pointText}</span>\n            {inputText.slice(targetIndex + pointText.length)}\n          </>\n        )\n      }\n    }\n    return inputText\n  }\n\n  const handleScroll = (callback: () => void) => {\n    if (playing) return\n\n    if (!animationPlayed && displayedText.length < text.length) {\n      let index = 0\n\n      if (intervalId !== null) {\n        clearInterval(intervalId)\n      }\n\n      const startAnimation = () => {\n        const interval = setInterval(() => {\n          if (index < text.length) {\n            setDisplayedText((displayText) => text.slice(0, ++index))\n          } else {\n            clearInterval(interval)\n            setIntervalId(null)\n            callback()\n          }\n        }, speed)\n        setIntervalId(interval)\n      }\n\n      if (delay !== 0) {\n        setTimeout(startAnimation, delay)\n      } else {\n        startAnimation()\n      }\n\n      setAnimationPlayed(true)\n      setPlaying(true)\n    }\n  }\n\n  const reversedAnimation = (callback: () => void) => {\n    if (playing) return\n\n    let reversedIndex = text.length\n\n    if (intervalId !== null) {\n      clearInterval(intervalId)\n    }\n\n    const reversedInterval = setInterval(() => {\n      if (reversedIndex > -1) {\n        setDisplayedText((displayText) => {\n          if (displayText.length > 0) {\n            return text.slice(0, reversedIndex)\n          }\n          return displayText\n        })\n        reversedIndex--\n      } else {\n        clearInterval(reversedInterval)\n        setIntervalId(null)\n        callback()\n      }\n    }, speed)\n    setIntervalId(reversedInterval)\n\n    setPlaying(true)\n  }\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        setIsVisible(entries[0].isIntersecting)\n      },\n      {\n        threshold: 1\n      }\n    )\n\n    if (textRef.current) {\n      observer.observe(textRef.current)\n    }\n\n    return () => {\n      if (textRef.current) {\n        observer.unobserve(textRef.current)\n      }\n    }\n  }, [textRef])\n\n  useEffect(() => {\n    if (isVisible) {\n      if (!animationPlayed && displayedText.length < text.length) {\n        handleScroll(() => {\n          setPlaying(false)\n          setAnimationPlayed(true) // 상태 추가\n        })\n      }\n    } else {\n      if (animationPlayed && displayedText.length === text.length) {\n        reversedAnimation(() => {\n          setPlaying(false)\n          setAnimationPlayed(false) // 상태 추가\n        })\n      }\n    }\n  }, [isVisible])\n\n  useEffect(() => {\n    if (playing) return\n\n    if (isVisible) {\n      if (!animationPlayed && displayedText.length < text.length) {\n        handleScroll(() => {\n          setPlaying(false)\n        })\n      }\n    } else {\n      if (animationPlayed && displayedText.length === text.length) {\n        reversedAnimation(() => {\n          setPlaying(false)\n        })\n      }\n    }\n    // animationPlayed가 변경되는 경우만 상태 업데이트와 관련된 효과를 다시 실행합니다.\n  }, [isVisible, animationPlayed])\n\n  return (\n    <span className={className} ref={textRef}>\n      {applyPointText(displayedText)}\n      {cursorView && (\n        <Cursor cursorText={cursorText} cursorColor={cursorColor} />\n      )}\n    </span>\n  )\n}\n\nexport default TypoAction\n"],"names":["Cursor","_ref","cursorText","_ref$cursorText","_ref$cursorColor","cursorColor","_useState","useState","cursorOpacity","setCursorOpacity","useEffect","cursorInterval","setInterval","state","clearInterval","React","createElement","style","opacity","paddingLeft","color","TypoAction","text","_ref$pointText","pointText","className","_ref$pointColor","pointColor","_ref$cursorView","cursorView","_ref$delay","delay","_ref$speed","speed","displayedText","setDisplayedText","_useState2","animationPlayed","setAnimationPlayed","_useState3","intervalId","setIntervalId","_useState4","playing","setPlaying","_useState5","isVisible","setIsVisible","textRef","useRef","applyPointText","inputText","targetIndex","indexOf","Fragment","slice","length","handleScroll","callback","index","startAnimation","interval","displayText","setTimeout","reversedAnimation","reversedIndex","reversedInterval","observer","IntersectionObserver","entries","isIntersecting","threshold","current","observe","unobserve","ref"],"mappings":"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"}