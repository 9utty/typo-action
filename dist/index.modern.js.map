{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\n\ninterface TypoActionProps {\n  text: string\n  pointText?: string\n  className?: string\n  pointColor?: string\n  cursorText?: string\n  cursorView?: boolean\n  delay?: number\n  speed?: number\n}\n\nconst TypoAction: React.FC<TypoActionProps> = ({\n  text,\n  pointText,\n  className,\n  pointColor = 'red',\n  cursorText = '|',\n  cursorView = true,\n  delay = 0,\n  speed = 100\n}) => {\n  const [displayedText, setDisplayedText] = useState('')\n  const [showCursor, setShowCursor] = useState(cursorView)\n  const textRef = useRef<HTMLSpanElement>(null)\n\n  const applyPointText = (inputText: string) => {\n    if (pointText) {\n      const targetIndex = inputText.indexOf(pointText)\n      if (targetIndex !== -1) {\n        return (\n          <>\n            {inputText.slice(0, targetIndex)}\n            <span style={{ color: pointColor }}>{pointText}</span>\n            {inputText.slice(targetIndex + pointText.length)}\n          </>\n        )\n      }\n    }\n    return inputText\n  }\n\n  const handleScroll = () => {\n    if (textRef.current) {\n      const windowHeight =\n        'innerHeight' in window\n          ? window.innerHeight\n          : document.documentElement.offsetHeight\n      const rect = textRef.current.getBoundingClientRect()\n      const elemTop = rect.top\n      const isVisible = elemTop <= windowHeight\n\n      const playTextAnimation = () => {\n        let index = 0\n        const interval = setInterval(() => {\n          if (index < text.length) {\n            setDisplayedText(text.substring(0, index + 1))\n            index++\n          } else {\n            clearInterval(interval)\n          }\n        }, speed)\n      }\n\n      if (isVisible) {\n        // 화면 내에 들어오면, 텍스트 애니메이션 재생\n        if (delay !== 0) {\n          setTimeout(() => {\n            playTextAnimation()\n          }, delay)\n        } else {\n          playTextAnimation()\n        }\n      } else {\n        // 화면 밖에 있으면, 텍스트 애니메이션 역재생\n        let reversedIndex = text.length\n        const reversedInterval = setInterval(() => {\n          if (reversedIndex > -1) {\n            setDisplayedText(text.substring(0, reversedIndex))\n            reversedIndex--\n          } else {\n            clearInterval(reversedInterval)\n          }\n        }, speed)\n      }\n    }\n  }\n\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll)\n    return () => {\n      window.removeEventListener('scroll', handleScroll)\n    }\n  }, [displayedText])\n\n  useEffect(() => {\n    if (cursorView) {\n      const cursorInterval = setInterval(() => {\n        setShowCursor((prevShowCursor) => !prevShowCursor)\n      }, 1000)\n      return () => {\n        clearInterval(cursorInterval)\n      }\n    }\n  }, [cursorView])\n\n  return (\n    <span className={className} ref={textRef}>\n      {applyPointText(displayedText)}\n      <span style={showCursor ? { marginLeft: '2px' } : { display: 'none' }}>\n        {cursorText}\n      </span>\n    </span>\n  )\n}\n\nexport default TypoAction\n"],"names":["TypoAction","_ref","text","pointText","className","_ref$pointColor","pointColor","_ref$cursorText","cursorText","_ref$cursorView","cursorView","_ref$delay","delay","_ref$speed","speed","_useState","useState","displayedText","setDisplayedText","_useState2","showCursor","setShowCursor","textRef","useRef","applyPointText","inputText","targetIndex","indexOf","React","createElement","Fragment","slice","style","color","length","handleScroll","current","windowHeight","window","innerHeight","document","documentElement","offsetHeight","rect","getBoundingClientRect","elemTop","top","isVisible","playTextAnimation","index","interval","setInterval","substring","clearInterval","setTimeout","reversedIndex","reversedInterval","useEffect","addEventListener","removeEventListener","cursorInterval","prevShowCursor","ref","marginLeft","display"],"mappings":"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"}